<html>
<head>
    <link rel="stylesheet" href="../styles/main.css" />
    <meta name="viewport" content="width=device-width" user-scalable="no">
</head>
<body>

    <canvas id="canvas" width="1920" height="1080">
        You really badly need to use a different browser.
    </canvas>
    <div id="address-label"></div>
    <div id="recorder" style="display: none;"></div>

    <!-- Library Includes -->
    <script type="text/javascript" src="../scripts/vendor/three/three.js"></script>
    <script type="text/javascript" src="../scripts/vendor/three/THREEx.WindowResize.js"></script>
    <script type="text/javascript" src="../scripts/vendor/three/threeoctree.min.js"></script>
    <script type="text/javascript" src="../scripts/vendor/dat.gui.js"></script>
    <script type="text/javascript" src="../scripts/vendor/leap/leap-0.6.0.min.js"></script>
    <script type="text/javascript" src="../scripts/vendor/leap/leap-plugins-0.1.6.min.js"></script>
    <script type="text/javascript" src="../scripts/vendor/leap/leap.rigged-hand-0.1.4.js"></script>
    <script type="text/javascript" src="../scripts/vendor/tween/TweenMax.min.js"></script>
    <script type="text/javascript" src="../scripts/vendor/underscore-1.3.3.min.js"></script>
    <script type="text/javascript" src="../scripts/vendor/socket.io-0.9.10.min.js"></script>
    <script type="text/javascript" src="../scripts/vendor/Tuio.min.js"></script>
    <script type="text/javascript" src="../scripts/vendor/howler.min.js"></script>

    <link rel="stylesheet" href="../styles/dat-gui-momo-theme.css"/>

    <!-- Source Includes -->
    <script type="text/javascript" src="../scripts/trimeshter.js"></script>
    <script type="text/javascript" src="../scripts/input/inputRecorder.js"></script>
    <script type="text/javascript" src="../scripts/input/inputNetCursor.js"></script>
    <script type="text/javascript" src="../scripts/input/inputLeapPinch.js"></script>
    <script type="text/javascript" src="../scripts/input/inputTouch.js"></script>
    <script type="text/javascript" src="../scripts/input/inputTuio.js"></script>
    <script type="text/javascript" src="../scripts/input/inputMouse.js"></script>
    <script type="text/javascript" src="../scripts/input/inputMyo.js"></script>
    <script type="text/javascript">

        // Create Trimeshter Interactive Scene
        var canvas = document.getElementById('canvas');
        var recorderElem = document.getElementById('recorder');

        var recorder = new mmmInput.Recorder({
            element: canvas,
            dispatcher: recorderElem
        });

        var trimeshter = new mmm.Trimeshter({
            canvas: canvas,
            input: recorder.dispatcher
        });

        // create params object with all required config settings for inputs
        var params = {
            three: trimeshter.three,
            onStart: trimeshter.onStart,
            onMove: trimeshter.onMove,
            onEnd: trimeshter.onEnd,
            sendTouches: false,
            sendMouse: false,
            element: canvas,
            dispatcher: canvas,
            config: trimeshter.config
        };

        window.leapInput = new mmmInput.LeapInput(params);
        var netCursor = new mmmInput.NetCursor(params);
        var touchInput = new mmmInput.TouchInput(params);
        var tuioCursor = new mmmInput.TuioCursor(params);
        var mouseCursor = new mmmInput.MouseInput(params);
        var myo = new mmmInput.MyoInput(params);

        var QueryString = function () {
            var query_string = {};
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                // If first entry with this name
                if (typeof query_string[pair[0]] === "undefined") {
                    query_string[pair[0]] = pair[1];
                    // If second entry with this name
                } else if (typeof query_string[pair[0]] === "string") {
                    var arr = [ query_string[pair[0]], pair[1] ];
                    query_string[pair[0]] = arr;
                    // If third or later entry with this name
                } else {
                    query_string[pair[0]].push(pair[1]);
                }
            }
            return query_string;
        }();

        var host = QueryString.host || '';
        var port = QueryString.port || '';

        document.getElementById('address-label').innerHTML = host + ":" + port;

    </script>
</body>
</html>